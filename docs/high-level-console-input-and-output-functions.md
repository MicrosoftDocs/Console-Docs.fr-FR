---
title: Fonctions d’entrée et de sortie de la console de haut niveau
description: Les fonctions ReadFile et WriteFile, ou les fonctions ReadConsole et WriteConsole, permettent à une application de lire l’entrée de la console et d’écrire la sortie de la console sous forme de flux de caractères.
author: miniksa
ms.author: miniksa
ms.topic: article
keywords: console, applications en mode caractère, applications en ligne de commande, applications Terminal Server, API de console
MS-HAID:
- '\_win32\_high\_level\_console\_input\_and\_output\_functions'
- base.high\_level\_console\_input\_and\_output\_functions
- consoles.high\_level\_console\_input\_and\_output\_functions
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: 086b1bec-85f8-4e31-848d-7cb2d2703a3d
ms.openlocfilehash: d6e13edf9350fcff812ad02b2d9116c3fe132154
ms.sourcegitcommit: b75f4688e080d300b80c552d0711fdd86b9974bf
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/24/2020
ms.locfileid: "89059089"
---
# <a name="high-level-console-input-and-output-functions"></a><span data-ttu-id="06fe6-104">Fonctions d’entrée et de sortie de la console de haut niveau</span><span class="sxs-lookup"><span data-stu-id="06fe6-104">High-Level Console Input and Output Functions</span></span>


<span data-ttu-id="06fe6-105">Les fonctions [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) et [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) , ou les fonctions [**ReadConsole**](readconsole.md) et [**WriteConsole**](writeconsole.md) , permettent à une application de lire l’entrée de la console et d’écrire la sortie de la console sous forme de flux de caractères.</span><span class="sxs-lookup"><span data-stu-id="06fe6-105">The [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) and [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) functions, or the [**ReadConsole**](readconsole.md) and [**WriteConsole**](writeconsole.md) functions, enable an application to read console input and write console output as a stream of characters.</span></span> <span data-ttu-id="06fe6-106">**ReadConsole** et **WriteConsole** se comportent exactement comme **ReadFile** et **WriteFile** , sauf qu’ils peuvent être utilisés comme fonctions à caractères larges (dans lesquelles les arguments Text doivent utiliser Unicode) ou comme fonctions ANSI (dans lesquelles les arguments Text doivent utiliser des caractères du jeu de caractères Windows).</span><span class="sxs-lookup"><span data-stu-id="06fe6-106">**ReadConsole** and **WriteConsole** behave exactly like **ReadFile** and **WriteFile** except that they can be used either as wide-character functions (in which text arguments must use Unicode) or as ANSI functions (in which text arguments must use characters from the Windows character set).</span></span> <span data-ttu-id="06fe6-107">Les applications qui doivent gérer un seul ensemble de sources pour prendre en charge Unicode ou le jeu de caractères ANSI doivent utiliser **ReadConsole** et **WriteConsole**.</span><span class="sxs-lookup"><span data-stu-id="06fe6-107">Applications that need to maintain a single set of sources to support either Unicode or the ANSI character set should use **ReadConsole** and **WriteConsole**.</span></span>

<span data-ttu-id="06fe6-108">[**ReadConsole**](readconsole.md) et [**WriteConsole**](writeconsole.md) peuvent uniquement être utilisés avec des handles de console ; [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) et [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) peuvent être utilisés avec d’autres Handles (tels que des fichiers ou des canaux).</span><span class="sxs-lookup"><span data-stu-id="06fe6-108">[**ReadConsole**](readconsole.md) and [**WriteConsole**](writeconsole.md) can only be used with console handles; [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) and [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) can be used with other handles (such as files or pipes).</span></span> <span data-ttu-id="06fe6-109">**ReadConsole** et **WriteConsole** échouent s’ils sont utilisés avec un handle standard qui a été redirigé et n’est plus un handle de console.</span><span class="sxs-lookup"><span data-stu-id="06fe6-109">**ReadConsole** and **WriteConsole** fail if used with a standard handle that has been redirected and is no longer a console handle.</span></span>

<span data-ttu-id="06fe6-110">Pour obtenir une entrée au clavier, un processus peut utiliser [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) ou [**ReadConsole**](readconsole.md) avec un handle vers la mémoire tampon d’entrée de la console, ou il peut utiliser **ReadFile** pour lire l’entrée à partir d’un fichier ou d’un canal si stdin a été redirigé.</span><span class="sxs-lookup"><span data-stu-id="06fe6-110">To get keyboard input, a process can use [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) or [**ReadConsole**](readconsole.md) with a handle to the console's input buffer, or it can use **ReadFile** to read input from a file or a pipe if STDIN has been redirected.</span></span> <span data-ttu-id="06fe6-111">Ces fonctions retournent uniquement les événements de clavier qui peuvent être traduits en caractères ANSI (ou en caractères Unicode dans le cas de **ReadConsole**).</span><span class="sxs-lookup"><span data-stu-id="06fe6-111">These functions only return keyboard events that can be translated into ANSI characters (or Unicode characters in the case of **ReadConsole**).</span></span> <span data-ttu-id="06fe6-112">L’entrée qui peut être retournée comprend des combinaisons de touches de contrôle.</span><span class="sxs-lookup"><span data-stu-id="06fe6-112">The input that can be returned includes control key combinations.</span></span> <span data-ttu-id="06fe6-113">Les fonctions ne retournent pas d’événements de clavier impliquant les touches de fonction ou les touches de direction.</span><span class="sxs-lookup"><span data-stu-id="06fe6-113">The functions do not return keyboard events involving the function keys or arrow keys.</span></span> <span data-ttu-id="06fe6-114">Les événements d’entrée générés par la souris, la fenêtre, le focus ou l’entrée de menu sont ignorés.</span><span class="sxs-lookup"><span data-stu-id="06fe6-114">Input events generated by mouse, window, focus, or menu input are discarded.</span></span>

<span data-ttu-id="06fe6-115">Si le mode de saisie de ligne est activé (mode par défaut), [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) et [**ReadConsole**](readconsole.md) ne retournent pas à l’application appelante tant que la touche entrée n’est pas enfoncée.</span><span class="sxs-lookup"><span data-stu-id="06fe6-115">If line input mode is enabled (the default mode), [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) and [**ReadConsole**](readconsole.md) do not return to the calling application until the ENTER key is pressed.</span></span> <span data-ttu-id="06fe6-116">Si le mode de saisie de ligne est désactivé, les fonctions ne retournent pas de données tant qu’au moins un caractère n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="06fe6-116">If line input mode is disabled, the functions do not return until at least one character is available.</span></span> <span data-ttu-id="06fe6-117">Dans l’un ou l’autre mode, tous les caractères disponibles sont lus jusqu’à ce que plus aucune clé soit disponible ou que le nombre spécifié de caractères ait été lu.</span><span class="sxs-lookup"><span data-stu-id="06fe6-117">In either mode, all available characters are read until either no more keys are available or the specified number of characters has been read.</span></span> <span data-ttu-id="06fe6-118">Les caractères non lus sont mis en mémoire tampon jusqu’à la prochaine opération de lecture.</span><span class="sxs-lookup"><span data-stu-id="06fe6-118">Unread characters are buffered until the next read operation.</span></span> <span data-ttu-id="06fe6-119">Les fonctions indiquent le nombre total de caractères réellement lus.</span><span class="sxs-lookup"><span data-stu-id="06fe6-119">The functions report the total number of characters actually read.</span></span> <span data-ttu-id="06fe6-120">Si le mode d’entrée ECHO est activé, les caractères lus par ces fonctions sont écrits dans la mémoire tampon d’écran active à la position actuelle du curseur.</span><span class="sxs-lookup"><span data-stu-id="06fe6-120">If echo input mode is enabled, characters read by these functions are written to the active screen buffer at the current cursor position.</span></span>

<span data-ttu-id="06fe6-121">Un processus peut utiliser [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) ou **WriteConsole** pour écrire dans une mémoire tampon d’écran active ou inactive, ou il peut utiliser **WriteFile** pour écrire dans un fichier ou un canal si stdout a été redirigé.</span><span class="sxs-lookup"><span data-stu-id="06fe6-121">A process can use [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) or **WriteConsole** to write to either an active or inactive screen buffer, or it can use **WriteFile** to write to a file or a pipe if STDOUT has been redirected.</span></span> <span data-ttu-id="06fe6-122">Le mode de sortie traité et le retour à la ligne en mode de sortie EOL contrôlent la façon dont les caractères sont écrits ou répercutés dans une mémoire tampon d’écran.</span><span class="sxs-lookup"><span data-stu-id="06fe6-122">Processed output mode and wrap at EOL output mode control the way characters are written or echoed to a screen buffer.</span></span>

<span data-ttu-id="06fe6-123">Les caractères écrits par [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) ou [**WriteConsole**](writeconsole.md), ou en écho par [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) ou [**ReadConsole**](readconsole.md), sont insérés dans une mémoire tampon d’écran à la position actuelle du curseur.</span><span class="sxs-lookup"><span data-stu-id="06fe6-123">Characters written by [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) or [**WriteConsole**](writeconsole.md), or echoed by [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) or [**ReadConsole**](readconsole.md), are inserted in a screen buffer at the current cursor position.</span></span> <span data-ttu-id="06fe6-124">À mesure que chaque caractère est écrit, la position du curseur passe à la cellule de caractère suivante ; Toutefois, le comportement à la fin d’une ligne dépend du retour à la ligne de la mémoire tampon de l’écran de la console en mode de sortie EOL.</span><span class="sxs-lookup"><span data-stu-id="06fe6-124">As each character is written, the cursor position advances to the next character cell; however, the behavior at the end of a row depends on the console screen buffer's wrap at EOL output mode.</span></span> <span data-ttu-id="06fe6-125">Une application peut utiliser la fonction [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) pour déterminer la position actuelle du curseur et la fonction [**SetConsoleCursorPosition**](setconsolecursorposition.md) pour définir la position du curseur.</span><span class="sxs-lookup"><span data-stu-id="06fe6-125">An application can use the [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) function to determine the current cursor position and the [**SetConsoleCursorPosition**](setconsolecursorposition.md) function to set the cursor position.</span></span>

<span data-ttu-id="06fe6-126">Pour obtenir un exemple qui utilise les fonctions d’e/s de console de haut niveau, consultez [utilisation des fonctions d’entrée et de sortie de haut niveau](using-the-high-level-input-and-output-functions.md).</span><span class="sxs-lookup"><span data-stu-id="06fe6-126">For an example that uses the high-level console I/O functions, see [Using the High-Level Input and Output Functions](using-the-high-level-input-and-output-functions.md).</span></span>

 

 




