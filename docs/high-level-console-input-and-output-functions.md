---
title: Fonctions d’entrée et de sortie de la console High-Level
description: Les fonctions ReadFile et WriteFile, ou les fonctions ReadConsole et WriteConsole, permettent à une application de lire l’entrée de la console et d’écrire la sortie de la console sous forme de flux de caractères.
author: miniksa
ms.author: miniksa
ms.topic: conceptual
keywords: console, applications en mode caractère, applications en ligne de commande, applications de terminal, API console
MS-HAID:
- '\_win32\_high\_level\_console\_input\_and\_output\_functions'
- base.high\_level\_console\_input\_and\_output\_functions
- consoles.high\_level\_console\_input\_and\_output\_functions
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/desktop
ms.assetid: 086b1bec-85f8-4e31-848d-7cb2d2703a3d
ms.openlocfilehash: 4849426195fa9cc2455d27e4b711e89558b6e93c
ms.sourcegitcommit: 463975e71920908a6bff9a6a7291ddf3736652d5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/30/2020
ms.locfileid: "93037737"
---
# <a name="high-level-console-input-and-output-functions"></a><span data-ttu-id="e6d9f-104">Fonctions d’entrée et de sortie de la console High-Level</span><span class="sxs-lookup"><span data-stu-id="e6d9f-104">High-Level Console Input and Output Functions</span></span>

<span data-ttu-id="e6d9f-105">Les fonctions [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) et [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) , ou les fonctions [**ReadConsole**](readconsole.md) et [**WriteConsole**](writeconsole.md) , permettent à une application de lire l’entrée de la console et d’écrire la sortie de la console sous forme de flux de caractères.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-105">The [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) and [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) functions, or the [**ReadConsole**](readconsole.md) and [**WriteConsole**](writeconsole.md) functions, enable an application to read console input and write console output as a stream of characters.</span></span> <span data-ttu-id="e6d9f-106">**ReadConsole** et **WriteConsole** se comportent exactement comme **ReadFile** et **WriteFile** , sauf qu’ils peuvent être utilisés comme fonctions à caractères larges (dans lesquelles les arguments Text doivent utiliser Unicode) ou comme fonctions ANSI (dans lesquelles les arguments Text doivent utiliser des caractères du jeu de caractères Windows).</span><span class="sxs-lookup"><span data-stu-id="e6d9f-106">**ReadConsole** and **WriteConsole** behave exactly like **ReadFile** and **WriteFile** except that they can be used either as wide-character functions (in which text arguments must use Unicode) or as ANSI functions (in which text arguments must use characters from the Windows character set).</span></span> <span data-ttu-id="e6d9f-107">Les applications qui doivent gérer un seul ensemble de sources pour prendre en charge Unicode ou le jeu de caractères ANSI doivent utiliser **ReadConsole** et **WriteConsole** .</span><span class="sxs-lookup"><span data-stu-id="e6d9f-107">Applications that need to maintain a single set of sources to support either Unicode or the ANSI character set should use **ReadConsole** and **WriteConsole** .</span></span>

<span data-ttu-id="e6d9f-108">[**ReadConsole**](readconsole.md) et [**WriteConsole**](writeconsole.md) peuvent uniquement être utilisés avec des handles de console ; [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) et [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) peuvent être utilisés avec d’autres Handles (tels que des fichiers ou des canaux).</span><span class="sxs-lookup"><span data-stu-id="e6d9f-108">[**ReadConsole**](readconsole.md) and [**WriteConsole**](writeconsole.md) can only be used with console handles; [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) and [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) can be used with other handles (such as files or pipes).</span></span> <span data-ttu-id="e6d9f-109">**ReadConsole** et **WriteConsole** échouent s’ils sont utilisés avec un handle standard qui a été redirigé et n’est plus un handle de console.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-109">**ReadConsole** and **WriteConsole** fail if used with a standard handle that has been redirected and is no longer a console handle.</span></span>

<span data-ttu-id="e6d9f-110">Pour obtenir une entrée au clavier, un processus peut utiliser [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) ou [**ReadConsole**](readconsole.md) avec un handle vers la mémoire tampon d’entrée de la console, ou il peut utiliser **ReadFile** pour lire l’entrée à partir d’un fichier ou d’un canal si `STDIN` a été redirigé.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-110">To get keyboard input, a process can use [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) or [**ReadConsole**](readconsole.md) with a handle to the console's input buffer, or it can use **ReadFile** to read input from a file or a pipe if `STDIN` has been redirected.</span></span> <span data-ttu-id="e6d9f-111">Ces fonctions retournent uniquement les événements de clavier qui peuvent être traduits en caractères ANSI ou Unicode.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-111">These functions only return keyboard events that can be translated into ANSI or Unicode characters.</span></span> <span data-ttu-id="e6d9f-112">L’entrée qui peut être retournée comprend des combinaisons de touches de contrôle.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-112">The input that can be returned includes control key combinations.</span></span> <span data-ttu-id="e6d9f-113">Les fonctions ne retournent pas d’événements de clavier impliquant les touches de fonction ou les touches de direction.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-113">The functions do not return keyboard events involving the function keys or arrow keys.</span></span> <span data-ttu-id="e6d9f-114">Les événements d’entrée générés par la souris, la fenêtre, le focus ou l’entrée de menu sont ignorés.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-114">Input events generated by mouse, window, focus, or menu input are discarded.</span></span>

<span data-ttu-id="e6d9f-115">Si le mode de saisie de ligne est activé (mode par défaut), [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) et [**ReadConsole**](readconsole.md) ne retournent pas à l’application appelante tant que la touche entrée n’est pas enfoncée.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-115">If line input mode is enabled (the default mode), [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) and [**ReadConsole**](readconsole.md) do not return to the calling application until the ENTER key is pressed.</span></span> <span data-ttu-id="e6d9f-116">Si le mode de saisie de ligne est désactivé, les fonctions ne retournent pas de données tant qu’au moins un caractère n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-116">If line input mode is disabled, the functions do not return until at least one character is available.</span></span> <span data-ttu-id="e6d9f-117">Dans l’un ou l’autre mode, tous les caractères disponibles sont lus jusqu’à ce que plus aucune clé soit disponible ou que le nombre spécifié de caractères ait été lu.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-117">In either mode, all available characters are read until either no more keys are available or the specified number of characters has been read.</span></span> <span data-ttu-id="e6d9f-118">Les caractères non lus sont mis en mémoire tampon jusqu’à la prochaine opération de lecture.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-118">Unread characters are buffered until the next read operation.</span></span> <span data-ttu-id="e6d9f-119">Les fonctions indiquent le nombre total de caractères réellement lus.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-119">The functions report the total number of characters actually read.</span></span> <span data-ttu-id="e6d9f-120">Si le mode d’entrée ECHO est activé, les caractères lus par ces fonctions sont écrits dans la mémoire tampon d’écran active à la position actuelle du curseur.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-120">If echo input mode is enabled, characters read by these functions are written to the active screen buffer at the current cursor position.</span></span>

<span data-ttu-id="e6d9f-121">Un processus peut utiliser [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) ou **WriteConsole** pour écrire dans une mémoire tampon d’écran active ou inactive, ou il peut utiliser **WriteFile** pour écrire dans un fichier ou un canal si stdout a été redirigé.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-121">A process can use [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) or **WriteConsole** to write to either an active or inactive screen buffer, or it can use **WriteFile** to write to a file or a pipe if STDOUT has been redirected.</span></span> <span data-ttu-id="e6d9f-122">Le mode de sortie traité et le retour à la ligne en mode de sortie EOL contrôlent la façon dont les caractères sont écrits ou répercutés dans une mémoire tampon d’écran.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-122">Processed output mode and wrap at EOL output mode control the way characters are written or echoed to a screen buffer.</span></span>

<span data-ttu-id="e6d9f-123">Les caractères écrits par [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) ou [**WriteConsole**](writeconsole.md), ou en écho par [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) ou [**ReadConsole**](readconsole.md), sont insérés dans une mémoire tampon d’écran à la position actuelle du curseur.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-123">Characters written by [**WriteFile**](https://msdn.microsoft.com/library/windows/desktop/aa365747) or [**WriteConsole**](writeconsole.md), or echoed by [**ReadFile**](https://msdn.microsoft.com/library/windows/desktop/aa365467) or [**ReadConsole**](readconsole.md), are inserted in a screen buffer at the current cursor position.</span></span> <span data-ttu-id="e6d9f-124">À mesure que chaque caractère est écrit, la position du curseur passe à la cellule de caractère suivante ; Toutefois, le comportement à la fin d’une ligne dépend du retour à la ligne de la mémoire tampon de l’écran de la console en mode de sortie EOL.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-124">As each character is written, the cursor position advances to the next character cell; however, the behavior at the end of a row depends on the console screen buffer's wrap at EOL output mode.</span></span>

<span data-ttu-id="e6d9f-125">Vous trouverez plus d’informations sur la position du curseur par le biais de **[séquences de terminaux virtuels](console-virtual-terminal-sequences.md)** , en particulier dans la catégorie état de la **[requête](console-virtual-terminal-sequences.md#query-state)** pour trouver la position actuelle et la catégorie de **[positionnement du curseur](console-virtual-terminal-sequences.md#cursor-positioning)** pour définir la position actuelle.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-125">Further detail about the position of the cursor can be found through **[virtual terminals sequences](console-virtual-terminal-sequences.md)** , specifically in the **[query state](console-virtual-terminal-sequences.md#query-state)** category for finding the current position and the **[cursor positioning](console-virtual-terminal-sequences.md#cursor-positioning)** category for setting the current position.</span></span> <span data-ttu-id="e6d9f-126">Une application peut également utiliser la fonction [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) pour déterminer la position actuelle du curseur et la fonction [**SetConsoleCursorPosition**](setconsolecursorposition.md) pour définir la position du curseur.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-126">Alternatively, an application can use the [**GetConsoleScreenBufferInfo**](getconsolescreenbufferinfo.md) function to determine the current cursor position and the [**SetConsoleCursorPosition**](setconsolecursorposition.md) function to set the cursor position.</span></span> <span data-ttu-id="e6d9f-127">Toutefois, le mécanisme de **séquences de terminaux virtuels** est préféré pour tout développement nouveau et en cours.</span><span class="sxs-lookup"><span data-stu-id="e6d9f-127">However, the **virtual terminal sequences** mechanism is preferred for all new and ongoing development.</span></span> <span data-ttu-id="e6d9f-128">Pour plus d’informations sur la stratégie qui sous-tend cette décision, consultez la documentation sur les **[fonctions classiques par rapport aux terminaux virtuels](classic-vs-vt.md)** et aux plans de l' **[écosystème](ecosystem-roadmap.md)** .</span><span class="sxs-lookup"><span data-stu-id="e6d9f-128">More details on the strategy behind this decision can be found in the **[classic functions versus virtual terminal](classic-vs-vt.md)** and **[ecosystem roadmap](ecosystem-roadmap.md)** documentation.</span></span>

<span data-ttu-id="e6d9f-129">Pour obtenir un exemple qui utilise les fonctions d’e/s de console de haut niveau, consultez [utilisation des fonctions d’entrée et de sortie High-Level](using-the-high-level-input-and-output-functions.md).</span><span class="sxs-lookup"><span data-stu-id="e6d9f-129">For an example that uses the high-level console I/O functions, see [Using the High-Level Input and Output Functions](using-the-high-level-input-and-output-functions.md).</span></span>
