---
title: Mode console héritée – Bureau Windows
description: Le mode console héritée est un outil de compatibilité qui permet d’exécuter des applications en ligne de commande qui peuvent ne pas fonctionner avec l’hôte de la console Windows 10.
author: miniksa
ms.author: miniksa
ms.topic: article
ms.prod: console
keywords: console, applications en mode caractère, applications en ligne de commande, applications Terminal Server, API de console, compatibilité
ms.openlocfilehash: a69e192426cc178ae98565db07c49f9ff2ce4961
ms.sourcegitcommit: b75f4688e080d300b80c552d0711fdd86b9974bf
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/24/2020
ms.locfileid: "89059288"
---
# <a name="legacy-console-mode"></a><span data-ttu-id="2f26d-104">Mode console hérité</span><span class="sxs-lookup"><span data-stu-id="2f26d-104">Legacy Console mode</span></span>

<span data-ttu-id="2f26d-105">Le mode de console hérité est un outil de compatibilité conçu pour aider les utilisateurs d’outils de ligne de commande plus anciens sur Windows 10.</span><span class="sxs-lookup"><span data-stu-id="2f26d-105">Legacy Console mode is a compatibility tool designed to help users of older command-line tools on Windows 10.</span></span> <span data-ttu-id="2f26d-106">Pour tous les outils en ligne de commande qui ne s’affichent pas ou ne fonctionnent pas correctement dans l’expérience de la console Windows 10 par défaut, ce mode fournit une solution à granularité grossière pour revenir au système à une version antérieure de l’expérience d’hébergement de la console.</span><span class="sxs-lookup"><span data-stu-id="2f26d-106">For any command-line tool that is not displaying or operating correctly in the default Windows 10 console experience, this mode provides a coarse-grained solution to stepping the system back to an older version of the console hosting experience.</span></span>

## <a name="using-legacy-console-mode"></a><span data-ttu-id="2f26d-107">Utilisation du mode console hérité</span><span class="sxs-lookup"><span data-stu-id="2f26d-107">Using Legacy Console Mode</span></span>

<span data-ttu-id="2f26d-108">Pour utiliser le mode console hérité, commencez par ouvrir une fenêtre d’hébergement de console.</span><span class="sxs-lookup"><span data-stu-id="2f26d-108">To use Legacy Console mode, first open any console hosting window.</span></span> <span data-ttu-id="2f26d-109">Cela s’effectue généralement en lançant l’un des interpréteurs de commandes [cmd](https://docs.microsoft.com/windows-server/administration/windows-commands/cmd) ou [PowerShell](https://docs.microsoft.com/powershell/scripting/install/installing-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="2f26d-109">This is typically done by launching one of the command interpreters [CMD](https://docs.microsoft.com/windows-server/administration/windows-commands/cmd) or [PowerShell](https://docs.microsoft.com/powershell/scripting/install/installing-windows-powershell).</span></span>

<span data-ttu-id="2f26d-110">Cliquez avec le bouton droit sur la barre de titre de l’application et choisissez l' `Properties` option de menu.</span><span class="sxs-lookup"><span data-stu-id="2f26d-110">Right-click on the application title bar and choose the `Properties` menu option.</span></span> <span data-ttu-id="2f26d-111">Choisissez le premier onglet, `Options` .</span><span class="sxs-lookup"><span data-stu-id="2f26d-111">Choose the first tab, `Options`.</span></span> <span data-ttu-id="2f26d-112">Activez ensuite la case à cocher en bas de la page décrivant `Use legacy console` .</span><span class="sxs-lookup"><span data-stu-id="2f26d-112">Then check the box at the bottom of the page describing `Use legacy console`.</span></span> <span data-ttu-id="2f26d-113">Appuyez sur le `OK` bouton pour appliquer.</span><span class="sxs-lookup"><span data-stu-id="2f26d-113">Press the `OK` button to apply.</span></span>

<span data-ttu-id="2f26d-114">Le paramètre peut être rétabli en revenant au même menu de la feuille de propriétés et en désactivez la case, puis en appuyant sur `OK` .</span><span class="sxs-lookup"><span data-stu-id="2f26d-114">The setting can be reverted by returning to the same property sheet menu and unchecking the box then pressing `OK`.</span></span>

<span data-ttu-id="2f26d-115">**Remarque :** Ce paramètre est appliqué globalement à toutes les sessions qui démarrent après la modification de la préférence.</span><span class="sxs-lookup"><span data-stu-id="2f26d-115">**NOTE:** This setting is globally applied to all sessions that start after the preference is changed.</span></span> <span data-ttu-id="2f26d-116">Les sessions déjà ouvertes ne seront pas modifiées.</span><span class="sxs-lookup"><span data-stu-id="2f26d-116">Sessions that are already open will not be changed.</span></span>

## <a name="differences-between-modes"></a><span data-ttu-id="2f26d-117">Différences entre les modes</span><span class="sxs-lookup"><span data-stu-id="2f26d-117">Differences between modes</span></span>

<span data-ttu-id="2f26d-118">L’équipe hôte de la console s’efforce de réduire les différences entre les modes hérité et actuel de la console pour s’assurer que le nombre de clients le plus récent possible peut exécuter la version la plus à jour.</span><span class="sxs-lookup"><span data-stu-id="2f26d-118">The Console Host team strives to minimize differences between the Legacy and current modes of the console to ensure that as many customers as possible can run the most up-to-date version.</span></span> <span data-ttu-id="2f26d-119">Si vous rencontrez un problème qui nécessite que vous utilisiez la console héritée qui n’est pas documentée ici, veuillez contacter l’équipe sur le référentiel [Microsoft/Terminal](https://github.com/microsoft/terminal/) GitHub ou via le [Hub de commentaires](https://docs.microsoft.com/windows-insider/feedback-hub/feedback-hub-app) pour obtenir de l’aide.</span><span class="sxs-lookup"><span data-stu-id="2f26d-119">If you experience an issue that requires you to use the legacy console that is not documented here, please contact the team on the [Microsoft/Terminal](https://github.com/microsoft/terminal/) GitHub repository or via the [Feedback Hub](https://docs.microsoft.com/windows-insider/feedback-hub/feedback-hub-app) for assistance.</span></span>

### <a name="16-bit-applications-on-32-bit-windows"></a><span data-ttu-id="2f26d-120">applications 16 bits sur Windows 32 bits</span><span class="sxs-lookup"><span data-stu-id="2f26d-120">16-bit applications on 32-bit Windows</span></span>

<span data-ttu-id="2f26d-121">Certaines applications 16 bits sur Windows 32 bits utilisent une technologie de machine virtuelle pour fonctionner sous le nom [NTVDM](https://docs.microsoft.com/windows/compatibility/ntvdm-and-16-bit-app-support).</span><span class="sxs-lookup"><span data-stu-id="2f26d-121">Some 16-bit applications on 32-bit Windows use a virtual machine technology to operate called [NTVDM](https://docs.microsoft.com/windows/compatibility/ntvdm-and-16-bit-app-support).</span></span> <span data-ttu-id="2f26d-122">Ces applications utilisent souvent un mode de mise en mémoire tampon d’écran graphique conjointement avec l’environnement d’hébergement de la console pour fonctionner.</span><span class="sxs-lookup"><span data-stu-id="2f26d-122">Often these applications use a graphical screen buffering mode in conjunction with the console hosting environment to operate.</span></span> <span data-ttu-id="2f26d-123">Seule l’expérience de la console héritée prend en charge ces modes de mise en mémoire tampon graphiques et la prise en charge d’API de console supplémentaire requise pour alimenter ces applications.</span><span class="sxs-lookup"><span data-stu-id="2f26d-123">Only the legacy console experience supports these graphical buffering modes and the additional console API support required to power these applications.</span></span> <span data-ttu-id="2f26d-124">Le système sélectionne automatiquement l’environnement de la console héritée quand l’une de ces applications est lancée.</span><span class="sxs-lookup"><span data-stu-id="2f26d-124">The system will automatically select the legacy console environment when one of these applications is launched.</span></span>

### <a name="ime-embedding"></a><span data-ttu-id="2f26d-125">Incorporation IME</span><span class="sxs-lookup"><span data-stu-id="2f26d-125">IME Embedding</span></span>

<span data-ttu-id="2f26d-126">L’hôte de console hérité incorporait la partie suggestion de l’IME à l’intérieur de la fenêtre d’hébergement en réservant une ligne en bas de l’écran pour obtenir des suggestions.</span><span class="sxs-lookup"><span data-stu-id="2f26d-126">The legacy Console Host embedded the suggestion portion of the IME inside the hosting window by reserving a line at the bottom of the screen for suggestions.</span></span> <span data-ttu-id="2f26d-127">L’environnement actuel de l’hôte de la console délègue cette activité au sous-système IME pour afficher une fenêtre superposée au-dessus de l’hôte de la console avec des suggestions.</span><span class="sxs-lookup"><span data-stu-id="2f26d-127">The current Console Host environment instead delegates this activity to the IME subsystem to display an overlay window above the console host with suggestions.</span></span> <span data-ttu-id="2f26d-128">Dans un environnement où les fenêtres de superposition ne sont pas possibles (comme avec certains outils de communication à distance), l’hôte de console hérité peut être nécessaire.</span><span class="sxs-lookup"><span data-stu-id="2f26d-128">In an environment where overlay windows are not possible (like with certain remoting tools), the legacy console host may be required.</span></span>

### <a name="api-differences"></a><span data-ttu-id="2f26d-129">Différences d’API</span><span class="sxs-lookup"><span data-stu-id="2f26d-129">API Differences</span></span>

<span data-ttu-id="2f26d-130">La principale différence connue entre les versions héritées et actuelles est l’implémentation d’UTF-8.</span><span class="sxs-lookup"><span data-stu-id="2f26d-130">The major known difference between legacy and current is the implementation of UTF-8.</span></span> <span data-ttu-id="2f26d-131">L’hôte hérité a une prise en charge extrêmement rudimentaire et souvent incorrecte d’UTF-8 avec la [page de codes 65001](https://docs.microsoft.com/windows/win32/intl/code-pages).</span><span class="sxs-lookup"><span data-stu-id="2f26d-131">The legacy host has extremely rudimentary and often incorrect support of UTF-8 with [code page 65001](https://docs.microsoft.com/windows/win32/intl/code-pages).</span></span> <span data-ttu-id="2f26d-132">L’hôte de console actuel contient des améliorations incrémentielles de la version préliminaire de Windows 10 pour améliorer cette prise en charge.</span><span class="sxs-lookup"><span data-stu-id="2f26d-132">The current console host contains incremental improvements release-over-release of Windows 10 to improve this support.</span></span> <span data-ttu-id="2f26d-133">Les applications qui tentent de s’appuyer sur la prédiction des interprétations « incorrectes connues » d’UTF-8 à partir de la console héritée peuvent recevoir des réponses différentes à mesure que la prise en charge est améliorée.</span><span class="sxs-lookup"><span data-stu-id="2f26d-133">Applications that are attempting to rely on predicting "known incorrect" interpretations of UTF-8 from the legacy console will find themselves receiving different answers as support is improved.</span></span> 

<span data-ttu-id="2f26d-134">Les autres différences rencontrées avec les API doivent être signalées au référentiel [Microsoft/Terminal](https://github.com/microsoft/terminal/) GitHub ou via le [Hub de commentaires](https://docs.microsoft.com/windows-insider/feedback-hub/feedback-hub-app) pour le triage et la correction possible.</span><span class="sxs-lookup"><span data-stu-id="2f26d-134">Other differences experienced with APIs should be reported to [Microsoft/Terminal](https://github.com/microsoft/terminal/) GitHub repository or via the [Feedback Hub](https://docs.microsoft.com/windows-insider/feedback-hub/feedback-hub-app) for triage and possible remediation.</span></span>